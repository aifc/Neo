jQuery(document).ready(function(a){"use strict";var b,c={init:function(){a(".slot-picker").on("click","a",this.time_picker_init),a("body").on("change","#wc_appointments_field_staff",this.show_available_time_slots),a(".wc-appointments-appointment-form").parents("form").on("date-selected",this.show_available_time_slots)},time_picker_init:function(){var b=a(this).data("value"),c=a(this).parents(".form-field").find("input"),d=a(this).closest("form");return c.val(b),a(this).parents(".form-field").find("li").removeClass("selected"),a(this).parents("li").addClass("selected"),d.triggerHandler("time-selected"),!1},show_available_time_slots:function(){var d=a(this).closest("form"),e=d.find(".slot-picker"),f=d.find("fieldset"),g=parseInt(f.find("input.appointment_date_year").val(),10),h=parseInt(f.find("input.appointment_date_month").val(),10),i=parseInt(f.find("input.appointment_date_day").val(),10);g&&h&&i&&(e.closest("div").find("input").val("").change(),e.closest("div").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}).show(),b&&b.abort(),b=a.ajax({type:"POST",url:wc_appointment_form_params.ajax_url,data:{action:"wc_appointments_get_slots",form:d.serialize(),timezone:jstz.determine().name()},success:function(a){if(e.html(a),e.closest("div").unblock(),null!==get_querystring("time")){var b=e.find('li.slot:not(".slot_empty") a[data-value="'+get_querystring("time")+'"]');b.length>0?b.click():c.autoselect_first_available_time(d)}else"yes"===wc_appointment_form_params.is_autoselect?c.autoselect_first_available_time(d):e.find("li.slot").removeClass("selected")},dataType:"html"}))},autoselect_first_available_time:function(a){var b=a.find(".slot-picker"),c=b.find('li.slot:not(".slot_empty"):first');c.length>0&&c.has("a")&&c.find("a").click()}};c.init()});